var _path = require('path');

//filePath defaults to root of project fixture folder
var fileHelper = function(cy){
    this.selectFile = function(filePath, elementSelector, type){
        cy.get(elementSelector).then(function(element){
            cy.fixture(filePath)
                .then((content) => {
                    const el = element[0];
                    const fileName = _path.basename(filePath);
                    const testFile = new File([content], fileName, {type:`${type}`});
                    const dataTransfer = new DataTransfer();

                    dataTransfer.items.add(testFile);
                    el.files = dataTransfer.files;
                });
        });
    };

};

module.exports = fileHelper;


